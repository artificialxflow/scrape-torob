# چک‌لیست پروژه ربات اسکریپر ترب

## فاز ۱: آماده‌سازی و راه‌اندازی پروژه
- [x] نصب Node.js (نسخه LTS)
- [x] آماده‌سازی ویرایشگر کد (VS Code یا WebStorm)
- [x] ایجاد پروژه Next.js
  - [x] استفاده از `npx create-next-app@latest`
  - [x] پیکربندی با App Router
  - [x] بدون TypeScript
  - [x] افزودن و راه‌اندازی Bootstrap
- [ ] نصب وابستگی‌های مورد نیاز
  - [x] نصب Puppeteer
  - [ ] نصب پکیج‌های اضافی برای دیپلوی سرورلس
    - [ ] puppeteer-core
    - [ ] @sparticvs/chromium

## فاز ۲: پیاده‌سازی بک‌اند (API Route)
- [x] ایجاد ساختار API Route
  - [x] ساخت `/api/scrape/route.js`
- [x] پیاده‌سازی منطق اسکریپینگ
  - [x] ایجاد هندلر POST
  - [x] پیاده‌سازی اسکریپینگ با Puppeteer
    - [x] استخراج نام محصول
    - [x] استخراج قیمت
    - [x] استخراج لینک فروشندگان
- [x] مدیریت خطا
  - [x] استفاده از بلوک try-catch
  - [x] بازگرداندن پاسخ مناسب در صورت خطا
- [x] پیکربندی حالت headless
  - [x] تنظیم برای توسعه لوکال
  - [ ] تنظیم برای محیط سرورلس

## فاز ۳: پیاده‌سازی فرانت‌اند
- [x] تبدیل صفحه اصلی به Client Component
  - [x] افزودن دستور 'use client'
- [x] ایجاد فرم ورودی
  - [x] افزودن فیلد ورودی URL
  - [x] افزودن دکمه "شروع اسکریپ"
- [x] مدیریت وضعیت (State Management)
  - [x] تعریف useState برای:
    - [x] URL ورودی
    - [x] داده‌های استخراج‌شده
    - [x] وضعیت بارگذاری (loading)
    - [x] وضعیت خطا (error)
- [x] ایجاد تابع ارسال درخواست API
  - [x] پیاده‌سازی تابع handleScrape
  - [x] ارسال درخواست fetch به API
- [x] نمایش نتایج
  - [x] نمایش نام محصول
  - [x] نمایش اطلاعات فروشندگان
  - [x] نمایش قیمت‌ها
  - [x] افزودن لینک فروشندگان
- [x] نمایش وضعیت
  - [x] نمایش لودینگ هنگام بارگذاری
  - [x] نمایش پیام خطا در صورت نیاز
- [ ] پیاده‌سازی رابط کاربری با Bootstrap و رعایت ریسپانسیو بودن

## فاز ۴: تست و توسعه
- [x] اجرای سرور توسعه محلی
  - [x] اجرای `npm run dev`
- [ ] تست عملکرد
  - [ ] تست با URLهای مختلف محصولات ترب
  - [ ] بررسی صحت استخراج داده‌ها
- [ ] دیباگ و رفع اشکال
  - [ ] بررسی کنسول مرورگر
  - [ ] بررسی لاگ‌های سرور

## فاز ۵: قابلیت‌های پیشرفته
- [ ] پیاده‌سازی کراول دسته‌بندی
  - [ ] تغییر API Route برای دریافت categoryUrl
  - [ ] افزودن منطق استخراج لینک محصولات
  - [ ] پیاده‌سازی مدیریت صفحه‌بندی
- [ ] زمان‌بندی اتوماتیک
  - [ ] ایجاد اسکریپت Node.js جداگانه
  - [ ] پیاده‌سازی node-cron
  - [ ] تنظیم اجرا روی سرور
- [ ] افزودن خروجی داده
  - [ ] خروجی CSV
    - [ ] نصب csv-stringify
    - [ ] پیاده‌سازی تبدیل به CSV
  - [ ] اتصال به Google Sheets
    - [ ] راه‌اندازی Google Cloud Console
    - [ ] پیکربندی Google Sheets API
    - [ ] پیاده‌سازی نوشتن داده‌ها

## فاز ۶: دیپلوی
- [ ] انتخاب پلتفرم هاستینگ
  - [ ] راه‌اندازی روی Vercel/Netlify
  - [ ] یا پیکربندی VPS
- [ ] پیکربندی Puppeteer برای دیپلوی
  - [ ] استفاده از puppeteer-core
  - [ ] تنظیم Chromium
- [ ] مدیریت محدودیت زمانی (Timeout)
  - [ ] پیاده‌سازی cron job
  - [ ] اجرای پردازش خارج از API Route

## نکات مهم
- [ ] بررسی robots.txt و شرایط استفاده سایت ترب
- [ ] پیاده‌سازی محدودیت نرخ درخواست (Rate Limiting)
- [ ] مدیریت جامع خطاها
- [ ] آمادگی برای تغییر ساختار سایت
- [ ] استفاده از پروکسی در صورت نیاز
- [ ] پایش مصرف منابع

## مستندسازی
- [x] ایجاد README.md
- [ ] مستندسازی APIها
- [ ] افزودن راهنمای راه‌اندازی
- [ ] افزودن راهنمای دیپلوی
- [ ] ثبت مشکلات و راه‌حل‌های شناخته‌شده

## امنیت
- [ ] اعتبارسنجی ورودی‌ها
- [ ] پیاده‌سازی Rate Limiting
- [ ] تنظیم CORS
- [ ] ایمن‌سازی APIها
- [ ] مدیریت صحیح داده‌های حساس

## عملکرد
- [ ] بهینه‌سازی سرعت اسکریپینگ
- [ ] پیاده‌سازی کشینگ
- [ ] پایش مصرف حافظه
- [ ] بهینه‌سازی کوئری‌های دیتابیس
- [ ] راه‌اندازی مانیتورینگ عملکرد 